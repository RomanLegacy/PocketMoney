{
    "contents" : "#analysis.r\n\nsource('config.R')\n\n# Test that the backtester runs\ntmp_res <- Backtest_ClassifierAlgo(my_tmp_test_params)\ntmp_res$Backtest_Parameters\ntail(tmp_res$, 20)\n\n# Run backtest twice (with different parameters) and compare the performance of each\n# ---\nmy_params <- list(\"Backtest_Tag\" = \"NoDailyReinvest\",\n                  \"Model_XDataFile\" = \"Data/SmallTestFile.csv\",  # RegXData_London.csv\n                  \"XData_To_Use\" = c(\"Returns\", \"PC1\", \"PC2\"),\n                  \"Fit_Window\" = 250,\n                  \"Show_Backtest_Progress\" = TRUE,\n                  \"Rolling_Window_Performance\" = 10,\n                  \"Prediction_Adjust_Factor\" = 0.5,\n                  \"AdjustPredictedPositions\" = TRUE,\n                  \"Classifier_Type\" = \"lda\",\n                  \"Refit_Classifier_Periodicity\" = NA,\n                  \"Start_AUM\" = 1e6,\n                  \"Reinvest_Daily\" = FALSE)\nbacktest_results <- Backtest_ClassifierAlgo(my_params)\ntmp_stats <- Calculate_AlgoPerformanceStats(backtest_results)\n\nmy_params <- list(\"Backtest_Tag\" = \"WithDailyReinvest\",\n                  \"Model_XDataFile\" = \"Data/SmallTestFile.csv\",  # SmallTestFile.csv\n                  \"XData_To_Use\" = c(\"Returns\", \"PC1\", \"PC2\"),\n                  \"Fit_Window\" = 250,\n                  \"Show_Backtest_Progress\" = TRUE,\n                  \"Rolling_Window_Performance\" = 10,\n                  \"Prediction_Adjust_Factor\" = 0.5,\n                  \"AdjustPredictedPositions\" = TRUE,\n                  \"Classifier_Type\" = \"lda\",\n                  \"Refit_Classifier_Periodicity\" = NA,\n                  \"Start_AUM\" = 1e6,\n                  \"Reinvest_Daily\" = TRUE)\nbacktest_results2 <- Backtest_ClassifierAlgo(my_params)\n\n# Tmp plots\ntmp <- backtest_results$Currency_Pnls$Aggregate; tmp[is.na(tmp)] <- 0\ntmp2 <- backtest_results2$Currency_Pnls$Aggregate; tmp2[is.na(tmp2)] <- 0\nplot(cumsum(tmp), type=\"l\"); lines(cumsum(tmp2), col=\"red\")\n\ntmp_ccys <- config$Currencies\nfor (i in seq_along(tmp_ccys)) {\n  tmp_ccy <- tmp_ccys[i]\n  tmp <- backtest_results$Currency_Returns[[tmp_ccy]]; tmp[is.na(tmp)] <- 0\n  tmp2 <- backtest_results2$Currency_Returns[[tmp_ccy]]; tmp2[is.na(tmp2)] <- 0\n  plot(cumsum(tmp), ylim=range(c(cumsum(tmp), cumsum(tmp2))), type=\"l\", main=paste(backtest_results$Backtest_Parameters$Backtest_Tag, backtest_results2$Backtest_Parameters$Backtest_Tag, tmp_ccy, sep=\" : \"))\n  lines(cumsum(tmp2), col=\"red\", lty=2)\n  legend(\"topleft\", legend=c(backtest_results$Backtest_Parameters$Backtest_Tag, backtest_results2$Backtest_Parameters$Backtest_Tag), col=1:2, lty=1:2)\n}\ntmp <- rowSums(backtest_results$Currency_Returns, na.rm=TRUE); tmp[is.na(tmp)] <- 0\ntmp2 <- rowSums(backtest_results2$Currency_Returns, na.rm=TRUE); tmp2[is.na(tmp2)] <- 0\nplot(cumsum(tmp), ylim=range(c(cumsum(tmp), cumsum(tmp2))), type=\"l\", main=\"Aggregate\")\nlines(cumsum(tmp2), col=\"red\", lty=2)\nlegend(\"topleft\", legend=c(backtest_results$Backtest_Parameters$Backtest_Tag, backtest_results2$Backtest_Parameters$Backtest_Tag), col=1:2, lty=1:2)\n\n# Plot the cumulative returns for each of the currencies and the aggregate portfolio\nbacktest_results$CurrencyTarget_Returns[is.na(backtest_results$CurrencyTarget_Returns)] <- 0\nfor (i in 1:ncol(backtest_results$CurrencyTarget_Returns)) {\n  plot(cumsum(backtest_results$CurrencyTarget_Returns[[i]]), type=\"l\", main=colnames(backtest_results$CurrencyTarget_Returns)[i])\n}\n# ---\n\n\ntmp_acc <- unlist(lapply(tmp_stats$Cross, function(d){d$Accuracy}))\ntmp_acc <- tmp_acc[order(tmp_acc, decreasing = TRUE)]\n\ntmp_imp <- unlist(lapply(tmp_stats$Cross, function(d){d$Impact}))\ntmp_imp <- tmp_imp[order(tmp_imp, decreasing = TRUE)]\n\ntmp_perf <- unlist(lapply(tmp_stats$Cross, function(d){d$Performance}))\ntmp_perf <- tmp_perf[order(tmp_perf, decreasing = TRUE)]\n\n\n",
    "created" : 1415200479472.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2002411436",
    "id" : "B55BA577",
    "lastKnownWriteTime" : 1415981012,
    "path" : "~/GitHub/PocketMoney/Algo_Classifiers/analysis.R",
    "project_path" : "analysis.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_source"
}